此处的失效是指：如果条件中有 or，只要其中一个条件没有索引，其他字段有索引也不会使用。

来张图对比下吧

OK，结论有了，但是为什么呢？

个人理解：

MySQL 优化执行计划目标都是出于成本考虑。OK，那么我们就对比下用索引和不用索引的成本好了。

不用索引

一次全表扫描完事

使用索引

就按照上图的表来描述好了。

id 走索引，

user_id 不走索引，所以成本就是全表扫描

最后还需要 merge 求并集

结果： 全表扫描 + 索引扫描 +merge

结论

很明显直接进行全表扫描操作更少，因此 MySQL 在这种情况下不走索引直接全表扫描也就可以理解了。

顺便上个都有索引的图好了。

可见都有索引的情况是直接使用的 union。

————————————————

版权声明：本文为 CSDN 博主「为啥我就不胖呢」的原创文章，遵循 CC 4.0 BY-SA 版权协议，转载请附上原文出处链接及本声明。

原文链接：https://blog.csdn.net/chenpengjia006/article/details/101228943
