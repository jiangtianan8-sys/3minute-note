Mysql 为了解决并发，数据安全的问题，使用了锁机制。

可以按照锁的粒度把数据库锁分为表级锁和行级锁。

表级锁：是 mysql 中锁定粒度最大的一种锁，对当前操作的整张表加锁，实现简单，资源消耗较少，加锁快，不会出现死锁。其锁定粒度最大，触发锁冲突的概率最高，并发度最低。MyISAM 和 InnoDB 引擎都支持表级锁。

行级锁：是 mysql 中锁定粒度最小的一种锁，只针对当前操作的行进行加锁。行级锁能大大减少数据库操作的冲突。其加锁粒度最小，并发度高，但加锁的开销也最大，加锁慢，会出现死锁。InnoDB 支持的行级锁，包含如下这几种。

1）Record Lock：对索引项加锁，锁定符合条件的行。其他事务不能修改和删除加锁项。

2）Gap Lock：对索引项之间的 " 间隙“加锁，锁定记录的范围（对第一条记录前的间隙或最后一条记录后的间隙加锁），不包含索引项本身。其他事务不能再锁范围内插入数据，这样就防止了别的事务新增幻影行。

3）Next-key Lock：锁定索引项本身和索引范围。即 Record Lock 和 Gap Lock 的结合，可解决幻读问题。

意向共享锁（IS）/意向排他锁（IX）

意向锁是由数据引擎自己维护的，用户无法手动操作意向锁

意向共享锁（Intention Shared Lock 简称 IS 锁）

表示事务准备给数据行加入共享锁，也就是说一个数据行加共享锁前必须先取得该表的 IS 锁。

意向排他锁（Intention Exclusive Lock 简称 IX 锁）

表示事务准备给数据行加入排他锁，说明事务在一个数据行加排他锁前必须先取得改表的 IX 锁

思考：为什么需要（表级别）的意向锁
